/**
 * Hard Drivin' - Animations & Transitions
 *
 * Comprehensive animation library for UI/UX polish
 * Features:
 * - Panel transitions (fade, slide, scale)
 * - Button interactions (hover, click)
 * - HUD element animations (pulse, glow, update)
 * - Loading states
 * - Damage/collision feedback
 * - Results celebration
 *
 * Performance: All animations use CSS transforms for GPU acceleration
 */

/* ===========================
   PANEL TRANSITIONS
   =========================== */

/* Fade in/out for panels */
.panel-fade-in {
  animation: panelFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes panelFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.panel-fade-out {
  animation: panelFadeOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes panelFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Scale in for menu panels */
.panel-scale-in {
  animation: panelScaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes panelScaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Slide in from top */
.panel-slide-down {
  animation: panelSlideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes panelSlideDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Slide in from bottom */
.panel-slide-up {
  animation: panelSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes panelSlideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===========================
   BUTTON ANIMATIONS
   =========================== */

/* Button hover lift */
.btn-hover-lift {
  position: relative;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px rgba(0, 255, 136, 0.3);
}

.btn-hover-lift:active {
  transform: translateY(-2px);
}

/* Button glow pulse */
.btn-glow-pulse {
  animation: btnGlowPulse 2s ease-in-out infinite;
}

@keyframes btnGlowPulse {
  0%, 100% {
    box-shadow: 0 0 15px rgba(0, 255, 136, 0.4),
                0 0 25px rgba(255, 0, 85, 0.2);
  }
  50% {
    box-shadow: 0 0 25px rgba(0, 255, 136, 0.7),
                0 0 35px rgba(255, 0, 85, 0.3);
  }
}

/* Button press animation */
.btn-press {
  animation: btnPress 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes btnPress {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

/* Ripple effect on click */
.ripple {
  position: relative;
  overflow: hidden;
}

.ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.ripple.active::after {
  animation: rippleEffect 0.6s ease-out forwards;
}

@keyframes rippleEffect {
  to {
    width: 300px;
    height: 300px;
    opacity: 0;
  }
}

/* ===========================
   HUD ANIMATIONS
   =========================== */

/* Speed update pulse */
.speed-update-pulse {
  animation: speedUpdatePulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes speedUpdatePulse {
  0% {
    transform: scale(1);
    color: #00ff88;
  }
  50% {
    transform: scale(1.1);
    color: #00ffaa;
    text-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
  }
  100% {
    transform: scale(1);
    color: #00ff88;
  }
}

/* Lap timer update */
.timer-update {
  animation: timerUpdate 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes timerUpdate {
  0% {
    transform: scale(0.95);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Damage indicator shake */
.damage-shake {
  animation: damageShake 0.5s cubic-bezier(0.36, 0, 0.66, -0.56) infinite;
}

@keyframes damageShake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  50% {
    transform: translateX(5px);
  }
  75% {
    transform: translateX(-5px);
  }
}

/* Damage indicator color shift */
.damage-warning {
  animation: damageWarning 0.6s ease-in-out infinite;
}

@keyframes damageWarning {
  0%, 100% {
    background: linear-gradient(90deg, #00ff88 0%, #ff0000 100%);
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
  }
  50% {
    background: linear-gradient(90deg, #ffaa00 0%, #ff0000 100%);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
  }
}

/* Position indicator highlight */
.position-highlight {
  animation: positionHighlight 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes positionHighlight {
  0% {
    transform: scale(1);
    color: #00ff88;
  }
  50% {
    transform: scale(1.15);
    color: #00ffaa;
    text-shadow: 0 0 20px rgba(0, 255, 136, 0.8),
                 0 0 30px rgba(0, 255, 136, 0.4);
  }
  100% {
    transform: scale(1);
    color: #00ff88;
  }
}

/* HUD element glow pulse */
.hud-element-glow {
  animation: hudElementGlow 1.5s ease-in-out infinite;
}

@keyframes hudElementGlow {
  0%, 100% {
    box-shadow: 0 0 10px rgba(0, 255, 136, 0.4),
                inset 0 0 8px rgba(0, 255, 136, 0.1);
  }
  50% {
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.7),
                inset 0 0 12px rgba(0, 255, 136, 0.2);
  }
}

/* ===========================
   LOADING ANIMATIONS
   =========================== */

/* Spinner */
.spinner {
  display: inline-block;
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 255, 136, 0.2);
  border-top-color: #00ff88;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Loading dots */
.loading-dots {
  display: inline-flex;
  gap: 8px;
}

.loading-dots span {
  width: 8px;
  height: 8px;
  background: #00ff88;
  border-radius: 50%;
  animation: loadingDotPulse 1.4s infinite ease-in-out;
}

.loading-dots span:nth-child(1) {
  animation-delay: 0s;
}

.loading-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes loadingDotPulse {
  0%, 60%, 100% {
    opacity: 0.3;
    transform: scale(1);
  }
  30% {
    opacity: 1;
    transform: scale(1.3);
  }
}

/* Progress bar animation */
.progress-bar-animated {
  animation: progressSlide 2s ease-in-out infinite;
}

@keyframes progressSlide {
  0% {
    background-position: 0% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* ===========================
   RESULTS SCREEN ANIMATIONS
   =========================== */

/* Results slide in */
.results-slide-in {
  animation: resultsSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes resultsSlideIn {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Number counter animation */
.number-counter {
  animation: numberCounter 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes numberCounter {
  from {
    opacity: 0;
    transform: scale(0.5);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Celebration particles */
.celebration-particle {
  animation: celebrationFloat 2s ease-out forwards;
  opacity: 0;
}

@keyframes celebrationFloat {
  0% {
    opacity: 1;
    transform: translateY(0) translateX(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-100px) translateX(var(--particle-x, 0)) scale(0);
  }
}

/* Achievement badge pop */
.achievement-badge-pop {
  animation: achievementPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes achievementPop {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  70% {
    transform: scale(1.2) rotate(0);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0);
    opacity: 1;
  }
}

/* ===========================
   STATUS NOTIFICATIONS
   =========================== */

/* Toast slide in from top */
.toast-slide-in {
  animation: toastSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes toastSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Toast slide out to top */
.toast-slide-out {
  animation: toastSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes toastSlideOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-20px);
  }
}

/* Warning pulse */
.warning-pulse {
  animation: warningPulse 0.6s cubic-bezier(0.36, 0, 0.66, -0.56) infinite;
}

@keyframes warningPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

/* ===========================
   CAR SELECTION ANIMATIONS
   =========================== */

/* Car card hover rotate */
.car-card-hover {
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.car-card-hover:hover {
  transform: scale(1.05) rotateY(5deg);
  box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
}

/* Car stats fade in */
.car-stats-fade-in {
  animation: carStatsFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes carStatsFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===========================
   MISC. EFFECTS
   =========================== */

/* Text glitch effect */
.glitch {
  animation: glitch 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
}

@keyframes glitch {
  0% {
    text-shadow: -2px 0 #00ffff, 2px 0 #ff00ff;
  }
  20% {
    text-shadow: -2px -2px #00ffff, 2px 2px #ff00ff;
  }
  40% {
    text-shadow: -2px 2px #00ffff, 2px -2px #ff00ff;
  }
  60% {
    text-shadow: 2px 0 #00ffff, -2px 0 #ff00ff;
  }
  80% {
    text-shadow: 2px 2px #00ffff, -2px -2px #ff00ff;
  }
  100% {
    text-shadow: -2px 0 #00ffff, 2px 0 #ff00ff;
  }
}

/* Bounce */
.bounce {
  animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* Fade in with blur */
.fade-in-blur {
  animation: fadeInBlur 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes fadeInBlur {
  from {
    opacity: 0;
    filter: blur(5px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

/* ===========================
   ACCESSIBILITY
   =========================== */

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .btn-hover-lift:hover {
    transform: none;
  }

  .btn-press {
    animation: none;
  }
}

/* High refresh rate displays */
@media (min-resolution: 144dpi) {
  .spinner {
    border-width: 3px;
  }

  .loading-dots span {
    width: 6px;
    height: 6px;
  }
}
